# 台指期程式交易看盤室

## 📊 專案簡介

這是一個基於 Streamlit 開發的台指期貨即時看盤系統，提供互動式 K 線圖表、技術指標分析和多時段交易視圖。適合程式交易員用於快速分析市場走勢、回測策略和監控盤勢。

## ✨ 主要功能

### 📈 多商品支援
- **台指期貨模擬**：使用台灣加權指數 (^TWII) 模擬台指期走勢
- **台積電 (2330.TW)**：台灣最具代表性的個股
- **台灣加權指數 (^TWII)**：觀察整體市場表現

### ⏰ 交易時段切換
- **全盤**：顯示所有交易時段資料
- **日盤**：08:45 - 13:45（一般交易時段）
- **夜盤**：15:00 - 次日 05:00（夜間交易時段）

### 📊 K 線週期選擇
- 分鐘線：1m, 5m, 15m, 30m, 60m
- **日線 (預設)**：適合中長期趨勢分析

### 📅 靈活的數據查詢
- **預設期間**：快速選擇 1個月、3個月、6個月、1年、2年、5年
- **自定義日期**：精確指定開始和結束日期，查看任意歷史時期

### 📏 Y 軸範圍控制
- **自動縮放**：根據數據自動調整顯示範圍
- **固定範圍**：自訂最小值和最大值（預設 28000-30000）

### 📐 技術指標
- **10日均線 (MA10)**：橘色線，短期趨勢指標
- **20日均線 (MA20)**：紫色線，中期趨勢指標
- **成交量柱狀圖**：紅綠配色符合台灣習慣

### 🖱️ 互動式圖表
- **拖曳平移**：左右拖動查看不同時間段
- **滾輪縮放**：放大縮小查看細節
- **自動移除非交易日**：週末和假日不顯示，圖表更緊湊

### 💹 即時報價資訊
- 最新收盤價
- 10日均線數值
- 20日均線數值
- 最新成交量

## 🛠️ 技術架構

### 核心技術
- **Streamlit**：Web 應用框架
- **Plotly**：互動式圖表庫
- **yfinance**：Yahoo Finance 數據接口
- **Pandas**：數據處理與分析

### 資料來源
- 目前使用 Yahoo Finance API 獲取歷史數據
- 建議實戰使用 **Shioaji API** 接收即時 Tick 資料

## 🚀 快速開始

### 環境需求
- Python 3.9+
- 網路連線（用於下載數據）

### 安裝步驟

1. **克隆專案**
```bash
git clone <repository-url>
cd stick_strategy
```

2. **建立虛擬環境**
```bash
python -m venv venv_new
```

3. **啟動虛擬環境**
```bash
# Windows
.\venv_new\Scripts\Activate.ps1

# Linux/Mac
source venv_new/bin/activate
```

4. **安裝依賴套件**
```bash
pip install -r requirements.txt
```

### 執行應用程式

```bash
streamlit run streamlit_app_new.py
```

應用程式會在瀏覽器自動開啟，預設網址：http://localhost:8502

## 📁 專案結構

```
stick_strategy/
│
├── streamlit_app_new.py      # 主應用程式（最新版本）
├── streamlit_run_app.py      # 舊版應用程式
├── tsmc_kline.py              # TSMC K線相關程式
├── tsmc_ticks.py              # TSMC Tick 資料處理
├── requirements.txt           # Python 依賴套件
├── venv_new/                  # 虛擬環境目錄
└── README.md                  # 專案說明文件
```

## 🎯 使用場景

### 1. 日內交易
- 使用分鐘K線（1m, 5m）觀察短期波動
- 切換日盤/夜盤時段分析不同時段特性

### 2. 波段交易
- 使用日K線配合 MA 指標捕捉趨勢
- 查看 3-6 個月數據找出支撐壓力

### 3. 策略回測
- 自定義日期範圍查看歷史特定時期表現
- 拖曳圖表快速瀏覽不同時間段

### 4. 盤勢監控
- 即時觀察最新收盤價與均線關係
- 成交量變化輔助判斷多空力道

## 🔄 未來規劃

- [ ] 整合 Shioaji API 接收即時 Tick 資料
- [ ] 新增更多技術指標（RSI, MACD, KD）
- [ ] 支援多商品對比分析
- [ ] 新增策略回測功能
- [ ] 加入自動交易訊號提示
- [ ] 支援多時間框架分析

## ⚠️ 注意事項

1. **數據限制**：Yahoo Finance 對分鐘線數據有時間限制（約1個月）
2. **非即時數據**：目前使用的是歷史數據，非即時報價
3. **僅供學習**：本專案僅供教育和研究用途，不構成投資建議
4. **模擬環境**：使用台灣加權指數模擬台指期，實際交易請使用正式期貨數據

## 📝 依賴套件

```txt
yfinance>=0.2.31
mplfinance>=0.12.10b0
pandas>=2.0.0
matplotlib>=3.7.0
shioaji[speed]>=1.0.0
pathlib>=1.0.1
streamlit
plotly
numpy
```

## 🤝 貢獻

歡迎提交 Issue 和 Pull Request 來改進這個專案！

## 📄 授權

本專案採用 MIT 授權條款

## 👨‍💻 開發者

本專案由 AI 助手協助開發完成

---

**⚡ 開始使用：`streamlit run streamlit_app_new.py`**
